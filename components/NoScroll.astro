---
export interface Props {}
const TAG = 'vtbot-noscroll'; // see also start of script
---

<meta name={TAG} content="true" />
<script>
	import { TRANSITION_AFTER_PREPARATION, TRANSITION_AFTER_SWAP } from 'astro:transitions/client';
	const TAG = 'vtbot-noscroll';

	let position = { left: 0, top: 0 };
	const enabled = () => !!document.querySelector(`meta[name="${TAG}"]`);
	const afterPreparation = () => enabled() && (position = { left: scrollX, top: scrollY });
	const afterSwap = () => enabled() && scrollTo({ ...position, behavior: 'instant' });
	document.addEventListener(TRANSITION_AFTER_PREPARATION, afterPreparation);
	document.addEventListener(TRANSITION_AFTER_SWAP, afterSwap);
</script>
